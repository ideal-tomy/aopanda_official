# あおぱんだ公式サイト 技術要件

## 1. スタック / アーキテクチャ
- フロント: Next.js (App Router) + TypeScript, Tailwind CSS, Framer Motion。
- 画像/動画最適化: `next/image`・`next/video`相当、AVIF/WebP、レスポンシブsrcset、LQIP。
- SEO: SSR/SSG、メタタグ/OGP自動生成、構造化データ(JSON-LD)を主要ページに実装。
- i18n拡張: 将来の多言語展開を考慮したルーティング設計。

## 2. パフォーマンス目標
- Lighthouse: Performance/SEO/Best Practices/Accessibility 90+。
- Core Web Vitals: LCP < 2.5s、CLS < 0.1を目標。
- 手法: 画像/フォントプリロード、遅延読み込み、Critical CSS、コード分割、キャッシュ制御。

## 3. CMS / コンテンツモデル (microCMS想定)
- NEWS: カテゴリ、タグ、サムネ、本文、公開/掲載期間、OGPフィールド。
- GOODS/GACHA: 商品名、価格、発売日、画像ギャラリー、購入・設置場所リンク、在庫/発売状況。
- MOVIE: TikTok/YouTubeリンク、サムネ、説明、再生リストID。
- BUSINESS: 会社情報、事例、ガイドライン、FAQ、問い合わせ先。
- CONTENTS: コンテンツ種別（ゲーム/漫画/アニメ等）、媒体、公開年、対応地域/言語、サムネ、外部リンク、サンプル（動画/画像/埋め込み）、タグ。
- LINKS（SNS集約）: プラットフォーム名、URL、地域/言語別リンク、表示順、アイコン種別、QRコード画像（任意）。
- 機能: 下書き/プレビュー、公開予約、ロール管理、更新履歴、画像CDN。
- ワークフロー: 校正→承認→公開の簡易承認フロー。

## 4. UI実装方針（CONTENTS/カードリスト）
- 横スクロールカルーセルはCSS scroll-snap + カスタム矢印（タブレット以上）を使用。スマホはスワイプを優先し、慣性スクロールを許容。
- グリッド列数: モバイル1列 or 横スクロール、タブレット2列、デスクトップ3-4列をブレークポイントで制御。
- 画像はLQIP + 遅延読み込み、サムネ比率は16:9または3:4をトークン化。Skeleton/フォールバックを共通化。
- カードデータはSSR/SSGでフェッチし、クライアント側は軽量ステート管理（フィルタ/タグ切替のみクライアント）。
- アクセシビリティ: スクロール領域にフォーカス移動を許可、矢印/ドットにaria-labelを付与。
- パフォーマンス: カルーセルを必要ページだけで動的インポート。観測区間以外はレイジーロード。

## 5. インフラ / 配信
- Hosting: Vercel（Preview/Production分離、環境変数管理、CI/CD）。
- メディア: 長尺はYouTube、短尺ループはCloudinary/Vercel Blob等で軽量配信。
- CDN/セキュリティ: HTTPS、CSP/CORS適正化、フォームreCAPTCHA、基本的なRate Limit。
- バックアップ: CMSデータの定期バックアップ方針を策定。

## 6. セキュリティ
- HTTPS強制、CSRF対策（フォーム/ミューテーション）、依存パッケージの脆弱性監査（Dependabot等）。
- 入力バリデーションとエラーハンドリング標準化。
- 秘匿情報は環境変数管理（Preview/Prod分離）。

## 7. アクセス解析 / 計測
- GA4・Search Console導入。
- イベント計測: 設置店リンククリック、問い合わせ送信、動画再生、スライダー操作など。
- KPIをダッシュボード化し、月次レビュー。

## 8. CI/CD・運用
- Vercel PreviewでのPR確認、本番デプロイの保護（レビュー/承認）。
- 自動テスト（lint/typecheck/基本E2E）とフォーマットをCIに組み込み。
- 障害時のロールバック手順、監視（Vercel Analytics等）を準備。

## 9. 将来拡張
- AIチャット: Vercel AI SDK + OpenAI、キャラクター人格を持った対話UIを計画。
- EC/在庫連携、多言語化対応を前提にAPI/ルーティングを設計。

